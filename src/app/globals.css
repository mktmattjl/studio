
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Heroic Fantasy Dark Theme - Base: Deep Stone Grays, Dark Wood Browns, Parchment Creams for Text */
    /* Main Backgrounds */
    --background: 195 7% 18%; /* #2A3132 - Dark Cool Grey (Previously 220 10% 10%) */
    --card: 195 7% 22%; /* #313839 - Slightly Lighter Dark Cool Grey for Cards (Previously 35 35% 70%) */
    --card-border-highlight: 195 7% 25%; /* Slightly lighter than card for top border */
    --popover: 195 7% 22%; /* Similar to Card */

    /* Text Colors */
    --foreground: 0 0% 95%; /* #F2F2F2 - Off-White (NEW) */
    --card-foreground: 0 0% 95%; /* #F2F2F2 - Off-White (NEW) */
    --popover-foreground: 0 0% 95%; /* #F2F2F2 - Off-White (NEW) */
    --muted-foreground: 0 0% 70%; /* #B3B3B3 - Light Grey (NEW) */
    --text-accent-thematic: 25 31% 67%; /* #C5A690 - Light Beige/Brown (NEW - for thematic text) */

    /* Accent Colors (Backgrounds for interactive elements if text on them is white) */
    --primary: 30 30% 30%; /* #665240 - Dark Brown (Reverted - for primary button BGs) */
    --primary-foreground: 0 0% 95%; /* #F2F2F2 - Off-White (NEW - for text on primary buttons) */
    
    --secondary: 195 7% 35%; /* #4F5B5C - Neutral Medium-Dark Grey (for secondary button BGs) */
    --secondary-foreground: 0 0% 95%; /* #F2F2F2 - Off-White (NEW - for text on secondary buttons) */

    --accent: 270 40% 55%; /* #8C66B3 - Amethyst Purple (for general hovers) */
    --accent-foreground: 0 0% 95%; /* #F2F2F2 - Off-White (NEW - for text on purple hovers) */

    /* Destructive Actions */
    --destructive: 0 70% 45%; /* #CC3D3D - Muted Red */
    --destructive-foreground: 0 0% 95%; /* #F2F2F2 - Off-White (NEW) */

    /* Borders & Inputs */
    --border: 195 7% 25%; /* #3A4243 - Subtle Border */
    --input: 195 7% 15%; /* #232829 - Very Dark Input Background */
    --input-foreground: 0 0% 95%; /* #F2F2F2 - Off-White (NEW) */
    --ring: 30 30% 40%; /* #806652 - Focus Ring, Dark Brown variant */
    
    --radius: 0.375rem; /* Slightly less rounded for a more "solid" feel */

    /* Custom Thematic Colors */
    --gold-accent: 40 70% 55%; /* #E0A040 - Gold for coins, slightly desaturated */
    --xp-bar-color: 30 30% 30%; /* #665240 - Dark Brown (matches primary) */
    
    --parchment-bg: 40 35% 85%; /* #E2DECF - Aged Parchment for calendar events */
    --parchment-text: 30 20% 25%; /* #4D423A - Dark Sepia/Brown text on parchment */

    /* Chart Colors */
    --chart-1: 30 30% 30%;   /* Dark Brown */
    --chart-2: 195 7% 35%;  /* Neutral Medium-Dark Grey */
    --chart-3: 270 40% 55%;   /* Amethyst Purple */
    --chart-4: 195 7% 50%;  /* Mid Grey */
    --chart-5: 40 70% 55%;   /* Gold */
  }

  .dark { 
    /* All :root variables define the dark theme directly now */
    --background: 195 7% 18%;
    --foreground: 0 0% 95%; /* #F2F2F2 */
    --card: 195 7% 22%;
    --card-foreground: 0 0% 95%; /* #F2F2F2 */
    --card-border-highlight: 195 7% 25%;
    --popover: 195 7% 22%;
    --popover-foreground: 0 0% 95%; /* #F2F2F2 */
    
    --primary: 30 30% 30%; 
    --primary-foreground: 0 0% 95%; /* #F2F2F2 */
    
    --secondary: 195 7% 35%; 
    --secondary-foreground: 0 0% 95%; /* #F2F2F2 */
    
    --muted: 195 7% 25%;
    --muted-foreground: 0 0% 70%; /* #B3B3B3 */
    
    --accent: 270 40% 55%; 
    --accent-foreground: 0 0% 95%; /* #F2F2F2 */
    
    --destructive: 0 70% 45%; 
    --destructive-foreground: 0 0% 95%; /* #F2F2F2 */
    
    --border: 195 7% 25%;
    --input: 195 7% 15%;
    --input-foreground: 0 0% 95%; /* #F2F2F2 */
    --ring: 30 30% 40%;
    
    --radius: 0.375rem;

    --text-accent-thematic: 25 31% 67%; /* #C5A690 */
    --gold-accent: 40 70% 55%; 
    --xp-bar-color: 30 30% 30%; 
    --parchment-bg: 40 35% 85%; 
    --parchment-text: 30 20% 25%;

    --chart-1: 30 30% 30%;  
    --chart-2: 195 7% 35%;  
    --chart-3: 270 40% 55%;  
    --chart-4: 195 7% 50%;    
    --chart-5: 40 70% 55%;  
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "cv02", "cv03", "cv04", "cv11", "ss01", "ss03"; 
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    line-height: 1.7; 
  }
  .font-pixel {
    font-family: var(--font-vt323), theme('fontFamily.mono'); 
    text-rendering: optimizeSpeed; 
    image-rendering: pixelated; 
    image-rendering: -moz-crisp-edges; 
    image-rendering: crisp-edges; 
    -ms-interpolation-mode: nearest-neighbor; 
  }
  a {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-1 focus-visible:ring-offset-background rounded-sm;
  }
  /* Links now use thematic text accent color for better visibility on dark background */
  a:not(.button):not([class*="no-underline"]) { 
    @apply text-[hsl(var(--text-accent-thematic))] hover:text-[hsl(var(--text-accent-thematic)/0.8)] hover:underline; 
  }
}

@layer components {
  /* Primary buttons now use dark brown bg, off-white text */
  .btn-primary-action { 
    @apply bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:shadow-lg transition-all duration-150 focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
  }
  /* Secondary buttons use neutral grey bg, off-white text */
  .btn-secondary-action { 
    @apply bg-secondary text-secondary-foreground hover:bg-secondary/90 shadow-sm hover:shadow-md transition-all duration-150 focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
  }
  /* Destructive buttons use their own destructive colors */
  .button[data-variant="destructive"] { 
     @apply focus-visible:ring-destructive;
  }
}

@layer utilities {
  .styled-scrollbar::-webkit-scrollbar {
    width: 10px; 
    height: 10px;
  }
  .styled-scrollbar::-webkit-scrollbar-thumb {
    background: hsl(var(--muted-foreground) / 0.6); 
    border-radius: var(--radius); 
    border: 2px solid hsl(var(--card)); 
  }
  .styled-scrollbar::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--muted-foreground) / 0.8);
  }
  .styled-scrollbar::-webkit-scrollbar-track {
    background: hsl(var(--background) / 0.7); 
    border-radius: var(--radius);
  }

  /* Quiz Animations */
  @keyframes pulse-correct { 
    0%, 100% { transform: scale(1); box-shadow: 0 0 0px hsl(var(--secondary) / 0.4); } 
    50% { transform: scale(1.03); box-shadow: 0 0 10px 2px hsl(var(--secondary) / 0.5); }
  }
  .animate-button-correct-pulse {
    animation: pulse-correct 0.6s ease-in-out;
  }

  @keyframes glow-card-correct { 
    0%, 100% { border-color: hsl(var(--border)); box-shadow: none; }
    50% { border-color: hsl(var(--secondary)); box-shadow: 0 0 15px hsl(var(--secondary) / 0.3); }  
  }
  .animate-card-correct-glow {
    animation: glow-card-correct 0.8s ease-in-out;
  }

  @keyframes coin-bonus-animation {
    0% { opacity: 0; transform: translateY(20px) scale(0.8); }
    20% { opacity: 1; transform: translateY(0) scale(1); }
    80% { opacity: 1; transform: translateY(0) scale(1); }
    100% { opacity: 0; transform: translateY(-40px) scale(1.1); }
  }
  .coin-bonus-animate {
    animation: coin-bonus-animation 1.5s ease-out forwards;
  }
}
    
